# jsutils é¡¹ç›®è§„èŒƒ

## é¡¹ç›®ç®€ä»‹

`@mudssky/jsutils` æ˜¯ä¸€ä¸ªä¸ªäººé€šç”¨JavaScriptå·¥å…·åº“ï¼Œé‡‡ç”¨TypeScriptç¼–å†™ï¼Œæä¾›äº†å¤šç§å¸¸ç”¨çš„å·¥å…·å‡½æ•°ã€‚è¯¥åº“æ‰“åŒ…ä¸ºESMã€CJSå’ŒUMDä¸‰ç§æ ¼å¼ï¼Œå¹¶åŒ…å«å®Œæ•´çš„ç±»å‹å£°æ˜ï¼Œç‰¹åˆ«é€‚åˆåœ¨TypeScripté¡¹ç›®ä¸­ä½¿ç”¨ã€‚

## ä»£ç é£æ ¼è§„èŒƒ

### TypeScript é…ç½®

- ç›®æ ‡ç‰ˆæœ¬ï¼šES2017
- æ¨¡å—ç³»ç»Ÿï¼šES2022
- æ¨¡å—è§£æç­–ç•¥ï¼šBundler

### ä»£ç æ ¼å¼åŒ–

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥ï¼š

1. **Prettier**

   - ä¸ä½¿ç”¨åˆ†å· (semi: false)
   - ä½¿ç”¨å•å¼•å· (singleQuote: true)
   - ä½¿ç”¨æ’ä»¶ï¼š
     - prettier-plugin-organize-imports
     - prettier-plugin-packagejson

2. **ESLint**
   - æ‰©å±•ï¼šeslint:recommended, plugin:@typescript-eslint/recommended
   - æ’ä»¶ï¼š@typescript-eslint, tsdoc

## æäº¤è§„èŒƒ

### Commit è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ Angular æäº¤è§„èŒƒï¼Œé€šè¿‡ commitlint è¿›è¡Œæ£€æŸ¥ã€‚æäº¤ä¿¡æ¯æ ¼å¼ä¸ºï¼š

```
{type}{scope}: {emoji}{subject}
```

#### æäº¤ç±»å‹

- **feat**: æ–°åŠŸèƒ½ ğŸ¸
- **fix**: ä¿®å¤bug ğŸ›
- **docs**: æ–‡æ¡£æ›´æ”¹ âœï¸
- **style**: ä»£ç é£æ ¼æ›´æ”¹ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ ğŸ’„
- **refactor**: ä»£ç é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bugçš„ä»£ç å˜åŠ¨ï¼‰ ğŸ”¨
- **perf**: æ€§èƒ½ä¼˜åŒ– âš¡ï¸
- **test**: æµ‹è¯•ç›¸å…³ ğŸ’
- **chore**: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ ğŸ¤–
- **ci**: CIç›¸å…³å˜åŠ¨ ğŸ¡

### ç‰ˆæœ¬å‘å¸ƒ

é¡¹ç›®ä½¿ç”¨ semantic-release è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒï¼Œé…ç½®å¦‚ä¸‹ï¼š

- å‘å¸ƒåˆ†æ”¯ï¼šmain
- æ’ä»¶ï¼š
  - @semantic-release/commit-analyzer
  - @semantic-release/release-notes-generator
  - @semantic-release/changelog
  - @semantic-release/npm
  - @semantic-release/github
  - @semantic-release/git

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ index.ts          # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ modules/          # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ array.ts      # æ•°ç»„ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ async.ts      # å¼‚æ­¥ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ bytes.ts      # å­—èŠ‚å¤„ç†å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/       # é…ç½®ç›¸å…³æ¨¡å—
â”‚   â”œâ”€â”€ decorator.ts  # è£…é¥°å™¨ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ dom.ts        # DOMæ“ä½œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ enum.ts       # æšä¸¾ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ error.ts      # é”™è¯¯å¤„ç†å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ fp.ts         # å‡½æ•°å¼ç¼–ç¨‹å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ function.ts   # å‡½æ•°ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ lang.ts       # è¯­è¨€ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ logger.ts     # æ—¥å¿—å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ math.ts       # æ•°å­¦ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ object.ts     # å¯¹è±¡æ“ä½œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ proxy.ts      # ä»£ç†ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ regex.ts      # æ­£åˆ™è¡¨è¾¾å¼å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ storage.ts    # å­˜å‚¨ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ string.ts     # å­—ç¬¦ä¸²æ“ä½œå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ style.ts      # æ ·å¼ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ test.ts       # æµ‹è¯•ç›¸å…³å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ typed.ts      # ç±»å‹ç›¸å…³å·¥å…·å‡½æ•°
â”œâ”€â”€ style/            # æ ·å¼ç›¸å…³
â”‚   â””â”€â”€ scss/         # SCSSæ ·å¼æ–‡ä»¶
â””â”€â”€ types/            # ç±»å‹å®šä¹‰
    â”œâ”€â”€ array.ts      # æ•°ç»„ç±»å‹å®šä¹‰
    â”œâ”€â”€ class.ts      # ç±»ç±»å‹å®šä¹‰
    â”œâ”€â”€ function.ts   # å‡½æ•°ç±»å‹å®šä¹‰
    â”œâ”€â”€ global.ts     # å…¨å±€ç±»å‹å®šä¹‰
    â”œâ”€â”€ index.ts      # ç±»å‹å…¥å£æ–‡ä»¶
    â”œâ”€â”€ math.ts       # æ•°å­¦ç±»å‹å®šä¹‰
    â”œâ”€â”€ object.ts     # å¯¹è±¡ç±»å‹å®šä¹‰
    â”œâ”€â”€ promise.ts    # Promiseç±»å‹å®šä¹‰
    â”œâ”€â”€ string.ts     # å­—ç¬¦ä¸²ç±»å‹å®šä¹‰
    â”œâ”€â”€ union.ts      # è”åˆç±»å‹å®šä¹‰
    â””â”€â”€ utils.ts      # å·¥å…·ç±»å‹å®šä¹‰
```

### å¼€å‘æµç¨‹

1. ä½¿ç”¨ `pnpm` ä½œä¸ºåŒ…ç®¡ç†å·¥å…·
2. å¼€å‘å‰è¿è¡Œ `pnpm install` å®‰è£…ä¾èµ–
3. ä½¿ç”¨ `pnpm build` æ„å»ºé¡¹ç›®

### æµ‹è¯•

ä½¿ç”¨vitestè¿›è¡Œå•å…ƒæµ‹è¯•

- æµ‹è¯•æ–‡ä»¶ä½äº `test/` ç›®å½•ä¸‹
- è¿è¡Œ `pnpm test` æ‰§è¡Œæµ‹è¯•
- ç±»å‹æµ‹è¯•æ–‡ä»¶ä½¿ç”¨ `.test-d.ts` åç¼€

## æ–‡æ¡£

- é¡¹ç›®æ–‡æ¡£ä½¿ç”¨ VitePress ç”Ÿæˆï¼Œä½äº `vitedocs/` ç›®å½•
- APIæ–‡æ¡£è‡ªåŠ¨ä»ä»£ç æ³¨é‡Šç”Ÿæˆ
